<div class="cly-vue-worldmap">
    <div class="bu-columns bu-is-gapless">
        <div class="bu-column bu-is-3 cly-vue-worldmap__list">
            <div class="cly-vue-worldmap__back-button bu-p-4" @click="goToMain" v-if="inDetail">
                <span class="text-medium"><- Back to World Map</span>
            </div>
            <div v-if="currentViewType === 'main'" class="cly-vue-worldmap__available-locations">
                <div class="cly-vue-worldmap__list-title bu-p-2">
                    <span class="bu-pl-2 text-uppercase text-small font-weight-bold">{{countriesTitle}}</span>
                </div>
                <cly-listbox
                    :bordered="false"
                    :options="locations"
                    :value="country"
                    @input="goToCountry($event)">
                </cly-listbox>
            </div>
            <div v-else-if="currentViewType === 'regions'">
                <div class="cly-vue-worldmap__list-title bu-p-2">
                    <span class="bu-pl-2 text-uppercase text-small font-weight-bold">{{regionsTitle}}</span>
                </div>
                <cly-listbox
                    :bordered="false"
                    :options="locations"
                    :value="focusedRegion"
                    @input="focusToRegion($event)">
                </cly-listbox>
            </div>
            <div v-else-if="currentViewType === 'cities'" class="cly-vue-worldmap__country-detail">
                <div class="cly-vue-worldmap__list-title bu-p-2">
                    <span class="bu-pl-2 text-uppercase text-small font-weight-bold">{{citiesTitle}}</span>
                </div>
                <cly-listbox
                    :bordered="false"
                    :options="locations"
                    :value="focusedCity"
                    @input="focusToCity($event)">
                </cly-listbox>
            </div>
        </div>
        <div class="bu-column bu-is-9">
            <l-map ref="lmap" v-loading="loading" :min-zoom="minZoom" :options="{zoomControl: false}" :max-bounds="maxBounds" style="height: 500px; width: 100%">

                <l-tile-layer pane="tilePane" v-if="showTile" :url="tileFeed" :no-wrap="true" :attribution="tileAttribution"></l-tile-layer>
                
                <l-geo-json
                    pane="tilePane"
                    :geojson="inDetail ? geojsonDetail:geojsonHome"
                    :options="inDetail ? optionsDetail:optionsHome"
                    :options-style="styleFunction">
                </l-geo-json>

                <l-control position="topLeft" pane="markerPane">
                    <div class="cly-vue-worldmap__detail-switch bu-m-3" v-show="inDetail">
                        <el-radio-group v-model="detailMode" size="small">
                            <el-radio-button label="regions">Regions</el-radio-button>
                            <el-radio-button label="cities">Cities</el-radio-button>
                        </el-radio-group>
                    </div>
                </l-control>

                <l-circle-marker
                    v-bind="circleMarkerConfig"
                    :radius="getMarkerRadius(item.value)"
                    :lat-lng="nameToLatLng[name]" 
                    :key="unique(name)"
                    v-for="(item, name) in activeMarkers">
                </l-circle-marker>
            </l-map>
        </div>
    </div>
</div>