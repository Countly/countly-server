<div class="cly-vue-sidebar__menu">
    <div class="cly-vue-sidebar__header">
        <cly-select-x
            search-placeholder=""
            placeholder="Select App"
            v-model="selectedApp"
            :mode="selectMode"
            :options="allApps"
            @change="onChange"
            popClass="cly-vue-sidebar__analytics-popper"
            prefixIcon="el-icon-platform-eleme"
            label="web"
            :width="200">
            <template v-slot:trigger="slotProps">
                <el-input
                    v-model="activeApp.name"
                    readonly="readonly"
                    clearable>
                    <template slot="prefix">
                        <div class="cly-vue-sidebar__app-image" :style="{backgroundImage: 'url(' + activeApp.image + ')'}"></div>
                    </template>
                    <template slot="suffix">
                        <i class="el-select__caret el-input__icon" :class="['el-icon-' + suffixIconClass(slotProps.dropdown)]"></i>
                    </template>
                </el-input>
            </template>
        </cly-select-x>
    </div>
    <div class="cly-vue-sidebar__main-menu">
        <div v-for="(cat, idx) in categories" :data-category="cat.name">
            <ul>
                <li v-for="(menu, idx) in categorizedMenus[cat.name]">
                    <div v-if="categorizedSubmenus[menu.name] && categorizedSubmenus[menu.name].length">
                        <el-collapse accordion>
                            <el-collapse-item :title="i18nM(menu.title)">
                                <ul>
                                    <li v-for="(submenu, idx) in categorizedSubmenus[menu.name]">
                                        <div
                                            :class="['cly-vue-sidebar__submenu-items',
                                                    {'cly-vue-sidebar__submenu-items--selected': selectedMenuItem.name === submenu.name}]"
                                                    @click="onMenuItemClick(submenu)">
                                            <a :href="submenu.url">
                                                <div class="has-ellipsis">{{i18nM(submenu.title)}}</div>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </el-collapse-item>
                        </el-collapse>
                    </div>
                    <div v-else
                        :class="['cly-vue-sidebar__menu-items',
                                {'cly-vue-sidebar__menu-items--selected': selectedMenuItem.name === menu.name}]"
                                @click="onMenuItemClick(menu)">
                        <a :href="menu.url">
                            <div class="has-ellipsis">{{i18nM(menu.title)}}</div>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>