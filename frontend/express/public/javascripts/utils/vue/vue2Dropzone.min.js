"use strict";var _slicedToArray=function(){function e(e,t){var n=[],i=!0,o=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done)&&(n.push(a.value),!(t&&n.length===t));i=!0);}catch(e){o=!0,s=e}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,i){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(n=n||self).vue2Dropzone=i()}(void 0,function(){"use strict";var n,o=(function(d){function p(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)?e:n}function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function o(o,e){for(var t,s=0;s<e.length;s++)t=e[s],t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}return function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}}(),e=function(){function t(){i(this,t)}return n(t,[{key:"on",value:function(n,e){return this._callbacks=this._callbacks||{},this._callbacks[n]||(this._callbacks[n]=[]),this._callbacks[n].push(e),this}},{key:"emit",value:function(a){this._callbacks=this._callbacks||{};var e=this._callbacks[a];if(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var l=0,d=d=e;;){if(l>=d.length)break;d[l++].apply(this,i)}}return this}},{key:"off",value:function(o,e){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var t=this._callbacks[o];if(!t)return this;if(1===arguments.length)return delete this._callbacks[o],this;for(var i=0;i<t.length;i++)if(t[i]===e){t.splice(i,1);break}return this}}]),t}(),c=function(){var s=Math.round,d=Math.min;function h(n,e){i(this,h);var t,o,d=p(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));if(d.element=n,d.version=h.version,d.defaultOptions.previewTemplate=d.defaultOptions.previewTemplate.replace(/\n*/g,""),d.clickableElements=[],d.listeners=[],d.files=[],"string"==typeof d.element&&(d.element=document.querySelector(d.element)),!d.element||null==d.element.nodeType)throw new Error("Invalid dropzone element.");if(d.element.dropzone)throw new Error("Dropzone already attached.");h.instances.push(d),d.element.dropzone=d;var s,c=null==(t=h.optionsForElement(d.element))?{}:t;if(d.options=h.extend({},d.defaultOptions,c,null==e?{}:e),d.options.forceFallback||!h.isBrowserSupported())return s=d.options.fallback.call(d),p(d,s);if(null==d.options.url&&(d.options.url=d.element.getAttribute("action")),!d.options.url)throw new Error("No URL provided.");if(d.options.acceptedFiles&&d.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(d.options.uploadMultiple&&d.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return d.options.acceptedMimeTypes&&(d.options.acceptedFiles=d.options.acceptedMimeTypes,delete d.options.acceptedMimeTypes),null!=d.options.renameFilename&&(d.options.renameFile=function(t){return d.options.renameFilename.call(d,t.name,t)}),d.options.method=d.options.method.toUpperCase(),(o=d.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),!1!==d.options.previewsContainer&&(d.options.previewsContainer?d.previewsContainer=h.getElement(d.options.previewsContainer,"previewsContainer"):d.previewsContainer=d.element),d.options.clickable&&(!0===d.options.clickable?d.clickableElements=[d.element]:d.clickableElements=h.getElements(d.options.clickable,"clickable")),d.init(),d}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(h,e),n(h,null,[{key:"initClass",value:function(){this.prototype.Emitter=e,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(n,e,t){if(t)return{dzuuid:t.file.upload.uuid,dzchunkindex:t.index,dztotalfilesize:t.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:t.file.upload.totalChunkCount,dzchunkbyteoffset:t.index*this.options.chunkSize}},accept:function(n,e){return e()},chunksUploaded:function(n,e){e()},fallback:function(){var o;this.element.className+=" dz-browser-not-supported";for(var s=0,a=a=this.element.getElementsByTagName("div");;){if(s>=a.length)break;var l=a[s++];if(/(^| )dz-message($| )/.test(l.className)){o=l,l.className="dz-message";break}}o||(o=h.createElement("<div class=\"dz-message\"><span></span></div>"),this.element.appendChild(o));var n=o.getElementsByTagName("span")[0];return n&&(null==n.textContent?null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage):n.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(a,e,l,p){var n={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},r=a.width/a.height;null==e&&null==l?(e=n.srcWidth,l=n.srcHeight):null==e?e=l*r:null==l&&(l=e/r);var o=(e=d(e,n.srcWidth))/(l=d(l,n.srcHeight));if(n.srcWidth>e||n.srcHeight>l)if("crop"===p)r>o?(n.srcHeight=a.height,n.srcWidth=n.srcHeight*o):(n.srcWidth=a.width,n.srcHeight=n.srcWidth/o);else{if("contain"!==p)throw new Error("Unknown resizeMethod '"+p+"'");r>o?l=e/r:e=l*r}return n.srcX=(a.width-n.srcWidth)/2,n.srcY=(a.height-n.srcHeight)/2,n.trgWidth=e,n.trgHeight=l,n},transformFile:function(n,e){return(this.options.resizeWidth||this.options.resizeHeight)&&n.type.match(/image.*/)?this.resizeImage(n,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,e):e(n)},previewTemplate:"<div class=\"dz-preview dz-file-preview\">\n  <div class=\"dz-image\"><img data-dz-thumbnail /></div>\n  <div class=\"dz-details\">\n    <div class=\"dz-size\"><span data-dz-size></span></div>\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n  </div>\n  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n  <div class=\"dz-success-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Check</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#747474\" fill-opacity=\"0.816519475\" fill=\"#FFFFFF\" sketch:type=\"MSShapeGroup\"></path>\n      </g>\n    </svg>\n  </div>\n  <div class=\"dz-error-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Error</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FFFFFF\" fill-opacity=\"0.816519475\">\n          <path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>",drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:function(){},dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:function(){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(o){var e=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){o.previewElement=h.createElement(this.options.previewTemplate.trim()),o.previewTemplate=o.previewElement,this.previewsContainer.appendChild(o.previewElement);for(var t=0,p=p=o.previewElement.querySelectorAll("[data-dz-name]");;){if(t>=p.length)break;var c=p[t++];c.textContent=o.name}for(var m=0,g=g=o.previewElement.querySelectorAll("[data-dz-size]");!(m>=g.length);)(c=g[m++]).innerHTML=this.filesize(o.size);this.options.addRemoveLinks&&(o._removeLink=h.createElement("<a class=\"dz-remove\" href=\"javascript:undefined;\" data-dz-remove>"+this.options.dictRemoveFile+"</a>"),o.previewElement.appendChild(o._removeLink));for(var v=function(t){return t.preventDefault(),t.stopPropagation(),o.status===h.UPLOADING?h.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(o)}):e.options.dictRemoveFileConfirmation?h.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(o)}):e.removeFile(o)},l=0,f=f=o.previewElement.querySelectorAll("[data-dz-remove]");;){if(l>=f.length)break;f[l++].addEventListener("click",v)}}},removedfile:function(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(o,e){if(o.previewElement){o.previewElement.classList.remove("dz-file-preview");for(var t=0,s=s=o.previewElement.querySelectorAll("[data-dz-thumbnail]");;){if(t>=s.length)break;var a=s[t++];a.alt=o.name,a.src=e}return setTimeout(function(){return o.previewElement.classList.add("dz-image-preview")},1)}},error:function(o,e){if(o.previewElement){o.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error);for(var s=0,a=a=o.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(s>=a.length)break;a[s++].textContent=e}}},errormultiple:function(){},processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(i,e){if(i.previewElement)for(var t=0,s=s=i.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){if(t>=s.length)break;var a=s[t++];"PROGRESS"===a.nodeName?a.value=e:a.style.width=e+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(t){return this.emit("error",t,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(t){if(t._removeLink&&(t._removeLink.innerHTML=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(d){for(var e=arguments.length,t=Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];for(var p=0,u=u=t;;){if(p>=u.length)break;var c=u[p++];for(var s in c){var a=c[s];d[s]=a}}return d}}]),n(h,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(t){return t.accepted}).map(function(t){return t})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(t){return!t.accepted}).map(function(t){return t})}},{key:"getFilesWithStatus",value:function(n){return this.files.filter(function(e){return e.status===n}).map(function(t){return t})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(h.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(h.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(h.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(t){return t.status===h.UPLOADING||t.status===h.QUEUED}).map(function(t){return t})}},{key:"init",value:function(){var s=this;("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(h.createElement("<div class=\"dz-default dz-message\"><span>"+this.options.dictDefaultMessage+"</span></div>")),!this.clickableElements.length)||function e(){return s.hiddenFileInput&&s.hiddenFileInput.parentNode.removeChild(s.hiddenFileInput),s.hiddenFileInput=document.createElement("input"),s.hiddenFileInput.setAttribute("type","file"),(null===s.options.maxFiles||1<s.options.maxFiles)&&s.hiddenFileInput.setAttribute("multiple","multiple"),s.hiddenFileInput.className="dz-hidden-input",null!==s.options.acceptedFiles&&s.hiddenFileInput.setAttribute("accept",s.options.acceptedFiles),null!==s.options.capture&&s.hiddenFileInput.setAttribute("capture",s.options.capture),s.hiddenFileInput.style.visibility="hidden",s.hiddenFileInput.style.position="absolute",s.hiddenFileInput.style.top="0",s.hiddenFileInput.style.left="0",s.hiddenFileInput.style.height="0",s.hiddenFileInput.style.width="0",h.getElement(s.options.hiddenInputContainer,"hiddenInputContainer").appendChild(s.hiddenFileInput),s.hiddenFileInput.addEventListener("change",function(){var t=s.hiddenFileInput.files;if(t.length)for(var i,a=0,l=l=t;!(a>=l.length);)i=l[a++],s.addFile(i);return s.emit("addedfiles",t),e()})}(),this.URL=null===window.URL?window.webkitURL:window.URL;for(var e=0,o=o=this.events;;){if(e>=o.length)break;var a=o[e++];this.on(a,this.options[a])}this.on("uploadprogress",function(){return s.updateTotalUploadProgress()}),this.on("removedfile",function(){return s.updateTotalUploadProgress()}),this.on("canceled",function(e){return s.emit("complete",e)}),this.on("complete",function(){if(0===s.getAddedFiles().length&&0===s.getUploadingFiles().length&&0===s.getQueuedFiles().length)return setTimeout(function(){return s.emit("queuecomplete")},0)});var n=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return s.emit("dragstart",e)},dragenter:function(e){return n(e),s.emit("dragenter",e)},dragover:function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(t){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",n(e),s.emit("dragover",e)},dragleave:function(e){return s.emit("dragleave",e)},drop:function(e){return n(e),s.drop(e)},dragend:function(e){return s.emit("dragend",e)}}}],this.clickableElements.forEach(function(e){return s.listeners.push({element:e,events:{click:function(t){return(e!==s.element||t.target===s.element||h.elementInside(t.target,s.element.querySelector(".dz-message")))&&s.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null==this.hiddenFileInput?void 0:this.hiddenFileInput.parentNode)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,h.instances.splice(h.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var s,a=0,l=0;if(this.getActiveFiles().length){for(var d=0,p=p=this.getActiveFiles();;){if(d>=p.length)break;var u=p[d++];a+=u.upload.bytesSent,l+=u.upload.total}s=100*a/l}else s=100;return this.emit("totaluploadprogress",s,l,a)}},{key:"_getParamName",value:function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")}},{key:"_renameFile",value:function(t){return"function"==typeof this.options.renameFile?this.options.renameFile(t):t.name}},{key:"getFallbackForm",value:function(){var o,s;if(o=this.getExistingFallback())return o;var a="<div class=\"dz-fallback\">";this.options.dictFallbackText&&(a+="<p>"+this.options.dictFallbackText+"</p>"),a+="<input type=\"file\" name=\""+this._getParamName(0)+"\" "+(this.options.uploadMultiple?"multiple=\"multiple\"":void 0)+" /><input type=\"submit\" value=\"Upload!\"></div>";var l=h.createElement(a);return"FORM"===this.element.tagName?(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)):(s=h.createElement("<form action=\""+this.options.url+"\" enctype=\"multipart/form-data\" method=\""+this.options.method+"\"></form>")).appendChild(l),null==s?l:s}},{key:"getExistingFallback",value:function(){for(var o=function(e){for(var o=0,s=s=e;;){if(o>=s.length)break;var a=s[o++];if(/(^| )fallback($| )/.test(a.className))return a}},e=["div","form"],t=0;t<e.length;t++){var s,a=e[t];if(s=o(this.element.getElementsByTagName(a)))return s}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(o){return function(){var e=[];for(var t in o.events){var i=o.events[t];e.push(o.element.addEventListener(t,i,!1))}return e}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(o){return function(){var e=[];for(var t in o.events){var i=o.events[t];e.push(o.element.removeEventListener(t,i,!1))}return e}()})}},{key:"disable",value:function(){var n=this;return this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(e){return n.cancelUpload(e)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(a){var e=Math.pow,l=0,d="b";if(0<a){for(var p,u=["tb","gb","mb","kb","b"],n=0;n<u.length;n++)if(p=u[n],a>=e(this.options.filesizeBase,4-n)/10){l=a/e(this.options.filesizeBase,4-n),d=p;break}l=s(10*l)/10}return"<strong>"+l+"</strong> "+this.options.dictFileSizeUnits[d]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(o){if(o.dataTransfer){this.emit("drop",o);for(var e=[],t=0;t<o.dataTransfer.files.length;t++)e[t]=o.dataTransfer.files[t];if(this.emit("addedfiles",e),e.length){var s=o.dataTransfer.items;s&&s.length&&null!=s[0].webkitGetAsEntry?this._addFilesFromItems(s):this.handleFiles(e)}}}},{key:"paste",value:function(o){if(null!=(e=null==o?void 0:o.clipboardData,s=function(t){return t.items},null==e?void 0:s(e))){var e,s;this.emit("paste",o);var a=o.clipboardData.items;return a.length?this._addFilesFromItems(a):void 0}}},{key:"handleFiles",value:function(o){for(var e=0,s=s=o;;){if(e>=s.length)break;var a=s[e++];this.addFile(a)}}},{key:"_addFilesFromItems",value:function(a){var e=this;return function(){for(var t=[],i=0,l=l=a;;){if(i>=l.length)break;var d,p=l[i++];null!=p.webkitGetAsEntry&&(d=p.webkitGetAsEntry())?d.isFile?t.push(e.addFile(p.getAsFile())):d.isDirectory?t.push(e._addFilesFromDirectory(d,d.name)):t.push(void 0):null!=p.getAsFile&&(null==p.kind||"file"===p.kind)?t.push(e.addFile(p.getAsFile())):t.push(void 0)}return t}()}},{key:"_addFilesFromDirectory",value:function(o,a){var t=this,i=o.createReader(),n=function(o){return e=console,s="log",a=function(e){return e.log(o)},null!=e&&"function"==typeof e[s]?a(e,s):void 0;var e,s,a};return function l(){return i.readEntries(function(e){if(0<e.length){for(var n,i=0,d=d=e;!(i>=d.length);)n=d[i++],n.isFile?n.file(function(n){if(!t.options.ignoreHiddenFiles||"."!==n.name.substring(0,1))return n.fullPath=a+"/"+n.name,t.addFile(n)}):n.isDirectory&&t._addFilesFromDirectory(n,a+"/"+n.name);l()}return null},n)}()}},{key:"accept",value:function(n,e){return this.options.maxFilesize&&n.size>1024*(1024*this.options.maxFilesize)?e(this.options.dictFileTooBig.replace("{{filesize}}",s(n.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):h.isValidFile(n,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",n)):this.options.accept.call(this,n,e):e(this.options.dictInvalidFileType)}},{key:"addFile",value:function(n){var e=Math.ceil,o=this;return n.upload={uuid:h.uuidv4(),progress:0,total:n.size,bytesSent:0,filename:this._renameFile(n),chunked:this.options.chunking&&(this.options.forceChunking||n.size>this.options.chunkSize),totalChunkCount:e(n.size/this.options.chunkSize)},this.files.push(n),n.status=h.ADDED,this.emit("addedfile",n),this._enqueueThumbnail(n),this.accept(n,function(e){return e?(n.accepted=!1,o._errorProcessing([n],e)):(n.accepted=!0,o.options.autoQueue&&o.enqueueFile(n)),o._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(o){for(var e=0,s=s=o;;){if(e>=s.length)break;var a=s[e++];this.enqueueFile(a)}return null}},{key:"enqueueFile",value:function(n){var e=this;if(n.status!==h.ADDED||!0!==n.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");return(n.status=h.QUEUED,this.options.autoProcessQueue)?setTimeout(function(){return e.processQueue()},0):void 0}},{key:"_enqueueThumbnail",value:function(n){var e=this;if(this.options.createImageThumbnails&&n.type.match(/image.*/)&&n.size<=1024*(1024*this.options.maxThumbnailFilesize))return this._thumbnailQueue.push(n),setTimeout(function(){return e._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var n=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var e=this._thumbnailQueue.shift();return this.createThumbnail(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(t){return n.emit("thumbnail",e,t),n._processingThumbnail=!1,n._processThumbnailQueue()})}}},{key:"removeFile",value:function(n){if(n.status===h.UPLOADING&&this.cancelUpload(n),this.files=t(this.files,n),this.emit("removedfile",n),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(o){null==o&&(o=!1);for(var s=0,a=a=this.files.slice();;){if(s>=a.length)break;var l=a[s++];(l.status!==h.UPLOADING||o)&&this.removeFile(l)}return null}},{key:"resizeImage",value:function(o,e,t,i,d){var r=this;return this.createThumbnail(o,e,t,i,!0,function(e,t){if(null==t)return d(o);var i=r.options.resizeMimeType;null==i&&(i=o.type);var s=t.toDataURL(i,r.options.resizeQuality);return"image/jpeg"!==i&&"image/jpg"!==i||(s=l.restore(o.dataURL,s)),d(h.dataURItoBlob(s))})}},{key:"createThumbnail",value:function(l,e,t,i,n,d){var o=this,s=new FileReader;return s.onload=function(){return(l.dataURL=s.result,"image/svg+xml"!==l.type)?o.createThumbnailFromUrl(l,e,t,i,n,d):void(null!=d&&d(s.result))},s.readAsDataURL(l)}},{key:"createThumbnailFromUrl",value:function(l,e,t,i,n,h,o){var g=this,a=document.createElement("img");return o&&(a.crossOrigin=o),a.onload=function(){var o=function(t){return t(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&n&&(o=function(t){return EXIF.getData(a,function(){return t(EXIF.getTag(this,"Orientation"))})}),o(function(n){var o=Math.PI;l.width=a.width,l.height=a.height;var r=g.options.resize.call(g,l,e,t,i),s=document.createElement("canvas"),d=s.getContext("2d");switch(s.width=r.trgWidth,s.height=r.trgHeight,4<n&&(s.width=r.trgHeight,s.height=r.trgWidth),n){case 2:d.translate(s.width,0),d.scale(-1,1);break;case 3:d.translate(s.width,s.height),d.rotate(Math.PI);break;case 4:d.translate(0,s.height),d.scale(1,-1);break;case 5:d.rotate(.5*o),d.scale(1,-1);break;case 6:d.rotate(.5*o),d.translate(0,-s.width);break;case 7:d.rotate(.5*o),d.translate(s.height,-s.width),d.scale(-1,1);break;case 8:d.rotate(-.5*o),d.translate(-s.height,0);}m(d,a,null==r.srcX?0:r.srcX,null==r.srcY?0:r.srcY,r.srcWidth,r.srcHeight,null==r.trgX?0:r.trgX,null==r.trgY?0:r.trgY,r.trgWidth,r.trgHeight);var u=s.toDataURL("image/png");if(null!=h)return h(u,s)})},null!=h&&(a.onerror=h),a.src=l.dataURL}},{key:"processQueue",value:function(){var o=this.options.parallelUploads,e=this.getUploadingFiles().length,t=e;if(!(e>=o)){var s=this.getQueuedFiles();if(0<s.length){if(this.options.uploadMultiple)return this.processFiles(s.slice(0,o-e));for(;t<o;){if(!s.length)return;this.processFile(s.shift()),t++}}}}},{key:"processFile",value:function(t){return this.processFiles([t])}},{key:"processFiles",value:function(o){for(var e=0,s=s=o;;){if(e>=s.length)break;var a=s[e++];a.processing=!0,a.status=h.UPLOADING,this.emit("processing",a)}return this.options.uploadMultiple&&this.emit("processingmultiple",o),this.uploadFiles(o)}},{key:"_getFilesWithXhr",value:function(n){return this.files.filter(function(e){return e.xhr===n}).map(function(t){return t})}},{key:"cancelUpload",value:function(o){if(o.status===h.UPLOADING){for(var e=this._getFilesWithXhr(o.xhr),t=0,l=l=e;;){if(t>=l.length)break;l[t++].status=h.CANCELED}void 0!==o.xhr&&o.xhr.abort();for(var d=0,p=p=e;;){if(d>=p.length)break;var u=p[d++];this.emit("canceled",u)}this.options.uploadMultiple&&this.emit("canceledmultiple",e)}else o.status!==h.ADDED&&o.status!==h.QUEUED||(o.status=h.CANCELED,this.emit("canceled",o),this.options.uploadMultiple&&this.emit("canceledmultiple",[o]));return this.options.autoProcessQueue?this.processQueue():void 0}},{key:"resolveOption",value:function(o){if("function"==typeof o){for(var e=arguments.length,t=Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return o.apply(this,t)}return o}},{key:"uploadFile",value:function(t){return this.uploadFiles([t])}},{key:"uploadFiles",value:function(o){var e=this;this._transformFiles(o,function(t){if(o[0].upload.chunked){var p=o[0],n=t[0];p.upload.chunks=[];var i=function(){for(var t=0;void 0!==p.upload.chunks[t];)t++;if(!(t>=p.upload.totalChunkCount)){var r=t*e.options.chunkSize,s=d(r+e.options.chunkSize,p.size),a={name:e._getParamName(0),data:n.webkitSlice?n.webkitSlice(r,s):n.slice(r,s),filename:p.upload.filename,chunkIndex:t};p.upload.chunks[t]={file:p,index:t,dataBlock:a,status:h.UPLOADING,progress:0,retries:0},e._uploadData(o,[a])}};if(p.upload.finishedChunkUpload=function(t){var n=!0;t.status=h.SUCCESS,t.dataBlock=null,t.xhr=null;for(var s=0;s<p.upload.totalChunkCount;s++){if(void 0===p.upload.chunks[s])return i();p.upload.chunks[s].status!==h.SUCCESS&&(n=!1)}n&&e.options.chunksUploaded(p,function(){e._finished(o,"",null)})},e.options.parallelChunkUploads)for(var s=0;s<p.upload.totalChunkCount;s++)i();else i()}else{for(var r=[],l=0;l<o.length;l++)r[l]={name:e._getParamName(l),data:t[l],filename:o[l].upload.filename};e._uploadData(o,r)}})}},{key:"_getChunk",value:function(n,e){for(var t=0;t<n.upload.totalChunkCount;t++)if(void 0!==n.upload.chunks[t]&&n.upload.chunks[t].xhr===e)return n.upload.chunks[t]}},{key:"_uploadData",value:function(o,e){for(var z=this,i=new XMLHttpRequest,t=0,n=n=o;;){if(t>=n.length)break;n[t++].xhr=i}o[0].upload.chunked&&(o[0].upload.chunks[e[0].chunkIndex].xhr=i);var F=this.resolveOption(this.options.method,o),a=this.resolveOption(this.options.url,o);i.open(F,a,!0),i.timeout=this.resolveOption(this.options.timeout,o),i.withCredentials=!!this.options.withCredentials,i.onload=function(e){z._finishedUploading(o,i,e)},i.onerror=function(){z._handleUploadError(o,i)},(null==i.upload?i:i.upload).onprogress=function(e){return z._updateFilesUploadProgress(o,i,e)};var l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var u in this.options.headers&&h.extend(l,this.options.headers),l){var d=l[u];d&&i.setRequestHeader(u,d)}var c=new FormData;if(this.options.params){var p=this.options.params;for(var x in"function"==typeof p&&(p=p.call(this,o,i,o[0].upload.chunked?this._getChunk(o[0],i):null)),p){var f=p[x];c.append(x,f)}}for(var m=0,E=E=o;;){if(m>=E.length)break;var C=E[m++];this.emit("sending",C,i,c)}this.options.uploadMultiple&&this.emit("sendingmultiple",o,i,c),this._addFormElementData(c);for(var k,S=0;S<e.length;S++)k=e[S],c.append(k.name,k.data,k.filename);this.submitRequest(i,c,o)}},{key:"_transformFiles",value:function(a,e){for(var t=this,l=[],n=0,i=function(o){t.options.transformFile.call(t,a[o],function(t){l[o]=t,++n===a.length&&e(l)})},o=0;o<a.length;o++)i(o)}},{key:"_addFormElementData",value:function(d){if("FORM"===this.element.tagName)for(var e=0,p=p=this.element.querySelectorAll("input, textarea, select, button");;){if(e>=p.length)break;var u=p[e++],n=u.getAttribute("name"),r=u.getAttribute("type");if(r&&(r=r.toLowerCase()),null!=n)if("SELECT"===u.tagName&&u.hasAttribute("multiple"))for(var c=0,m=m=u.options;;){if(c>=m.length)break;var h=m[c++];h.selected&&d.append(n,h.value)}else(!r||"checkbox"!==r&&"radio"!==r||u.checked)&&d.append(n,u.value)}}},{key:"_updateFilesUploadProgress",value:function(z,e,t){var i;if(void 0!==t){if(i=100*t.loaded/t.total,z[0].upload.chunked){var F=z[0],r=this._getChunk(F,e);r.progress=i,r.total=t.total,r.bytesSent=t.loaded,F.upload.progress=0,F.upload.total=0,F.upload.bytesSent=0;for(var o=0;o<F.upload.totalChunkCount;o++)void 0!==F.upload.chunks[o]&&void 0!==F.upload.chunks[o].progress&&(F.upload.progress+=F.upload.chunks[o].progress,F.upload.total+=F.upload.chunks[o].total,F.upload.bytesSent+=F.upload.chunks[o].bytesSent);F.upload.progress/=F.upload.totalChunkCount}else for(var b=0,x=x=z;;){if(b>=x.length)break;var E=x[b++];E.upload.progress=i,E.upload.total=t.total,E.upload.bytesSent=t.loaded}for(var u=0,C=C=z;;){if(u>=C.length)break;var S=C[u++];this.emit("uploadprogress",S,S.upload.progress,S.upload.bytesSent)}}else{var p=!0;i=100;for(var w=0,L=L=z;;){if(w>=L.length)break;var _=L[w++];100===_.upload.progress&&_.upload.bytesSent===_.upload.total||(p=!1),_.upload.progress=i,_.upload.bytesSent=_.upload.total}if(p)return;for(var v=0,A=A=z;;){if(v>=A.length)break;var T=A[v++];this.emit("uploadprogress",T,i,T.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(o,e,t){var s;if(o[0].status!==h.CANCELED&&4===e.readyState){if("arraybuffer"!==e.responseType&&"blob"!==e.responseType&&(s=e.responseText,e.getResponseHeader("content-type")&&~e.getResponseHeader("content-type").indexOf("application/json")))try{s=JSON.parse(s)}catch(n){t=n,s="Invalid JSON response from server."}this._updateFilesUploadProgress(o),200<=e.status&&300>e.status?o[0].upload.chunked?o[0].upload.finishedChunkUpload(this._getChunk(o[0],e)):this._finished(o,s,t):this._handleUploadError(o,e,s)}}},{key:"_handleUploadError",value:function(o,e,t){if(o[0].status!==h.CANCELED){if(o[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(o[0],e);if(i.retries++<this.options.retryChunksLimit)return void this._uploadData(o,[i.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var n=0,a=a=o;;){if(n>=a.length)break;a[n++],this._errorProcessing(o,t||this.options.dictResponseError.replace("{{statusCode}}",e.status),e)}}}},{key:"submitRequest",value:function(n,e){n.send(e)}},{key:"_finished",value:function(o,e,t){for(var i=0,a=a=o;;){if(i>=a.length)break;var l=a[i++];l.status=h.SUCCESS,this.emit("success",l,e,t),this.emit("complete",l)}if(this.options.uploadMultiple&&(this.emit("successmultiple",o,e,t),this.emit("completemultiple",o)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(o,e,t){for(var i=0,a=a=o;;){if(i>=a.length)break;var l=a[i++];l.status=h.ERROR,this.emit("error",l,e,t),this.emit("complete",l)}if(this.options.uploadMultiple&&(this.emit("errormultiple",o,e,t),this.emit("completemultiple",o)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=0|16*Math.random();return("x"===n?e:8|3&e).toString(16)})}}]),h}();c.initClass(),c.version="5.5.1",c.options={},c.optionsForElement=function(t){return t.getAttribute("id")?c.options[o(t.getAttribute("id"))]:void 0},c.instances=[],c.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null==t?void 0:t.dropzone))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},c.autoDiscover=!0,c.discover=function(){var s;if(document.querySelectorAll)s=document.querySelectorAll(".dropzone");else{s=[];var n=function(e){return function(){for(var t=[],i=0,a=a=e;;){if(i>=a.length)break;var l=a[i++];/(^| )dropzone($| )/.test(l.className)?t.push(s.push(l)):t.push(void 0)}return t}()};n(document.getElementsByTagName("div")),n(document.getElementsByTagName("form"))}return function(){for(var e=[],t=0,o=o=s;;){if(t>=o.length)break;var a=o[t++];!1===c.optionsForElement(a)?e.push(void 0):e.push(new c(a))}return e}()},c.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],c.isBrowserSupported=function(){var n=!0;if(!(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector))n=!1;else if("classList"in document.createElement("a"))for(var o=0,s=s=c.blacklistedBrowsers;;){if(o>=s.length)break;s[o++].test(navigator.userAgent)&&(n=!1)}else n=!1;return n},c.dataURItoBlob=function(l){for(var e=atob(l.split(",")[1]),t=l.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),n=new Uint8Array(i),d=0,r=e.length,s=0<=r;s?d<=r:d>=r;s?d++:d--)n[d]=e.charCodeAt(d);return new Blob([i],{type:t})};var t=function(n,i){return n.filter(function(t){return t!==i}).map(function(t){return t})},o=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})};c.createElement=function(n){var e=document.createElement("div");return e.innerHTML=n,e.childNodes[0]},c.elementInside=function(n,i){if(n===i)return!0;for(;n=n.parentNode;)if(n===i)return!0;return!1},c.getElement=function(n,e){var t;if("string"==typeof n?t=document.querySelector(n):null!=n.nodeType&&(t=n),null==t)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return t},c.getElements=function(l,e){var t,d;if(l instanceof Array){d=[];try{for(var p=0,u=u=l;!(p>=u.length);)t=u[p++],d.push(this.getElement(t,e))}catch(t){d=null}}else if("string"==typeof l){d=[];for(var c=0,m=m=document.querySelectorAll(l);!(c>=m.length);)t=m[c++],d.push(t)}else null!=l.nodeType&&(d=[l]);if(null==d||!d.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return d},c.confirm=function(n,e,t){return window.confirm(n)?e():null==t?void 0:t()},c.isValidFile=function(a,e){if(!e)return!0;e=e.split(",");for(var l=a.type,i=l.replace(/\/.*$/,""),n=0,d=d=e;;){if(n>=d.length)break;var p=d[n++];if("."===(p=p.trim()).charAt(0)){if(-1!==a.name.toLowerCase().indexOf(p.toLowerCase(),a.name.length-p.length))return!0;}else if(/\/\*$/.test(p)){if(i===p.replace(/\/.*$/,""))return!0;}else if(l===p)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new c(this,t)})}),null===d?window.Dropzone=c:d.exports=c,c.ADDED="added",c.QUEUED="queued",c.ACCEPTED=c.QUEUED,c.UPLOADING="uploading",c.PROCESSING=c.UPLOADING,c.CANCELED="canceled",c.ERROR="error",c.SUCCESS="success";var m=function(l,e,t,i,n,r,o,s,a,p){var u=function(d){d.naturalWidth;var e=d.naturalHeight,t=document.createElement("canvas");t.width=1,t.height=e;var i=t.getContext("2d");i.drawImage(d,0,0);for(var n=i.getImageData(1,0,1,e).data,r=0,p=e,u=e;u>r;)0===n[4*(u-1)+3]?p=u:r=u,u=p+r>>1;var c=u/e;return 0==c?1:c}(e);return l.drawImage(e,t,i,n,r,o,s,a,p/u)},l=function(){function t(){i(this,t)}return n(t,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(d){for(var e="",p=void 0,c=void 0,m="",h=void 0,g=void 0,v=void 0,f="",z=0;h=(p=d[z++])>>2,g=(3&p)<<4|(c=d[z++])>>4,v=(15&c)<<2|(m=d[z++])>>6,f=63&m,isNaN(c)?v=f=64:isNaN(m)&&(f=64),e=e+this.KEY_STR.charAt(h)+this.KEY_STR.charAt(g)+this.KEY_STR.charAt(v)+this.KEY_STR.charAt(f),p=c=m="",h=g=v=f="",z<d.length;);return e}},{key:"restore",value:function(o,e){if(!o.match("data:image/jpeg;base64,"))return e;var t=this.decode64(o.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(t),n=this.exifManipulation(e,i);return"data:image/jpeg;base64,"+this.encode64(n)}},{key:"exifManipulation",value:function(o,e){var t=this.getExifArray(e),i=this.insertExif(o,t);return new Uint8Array(i)}},{key:"getExifArray",value:function(n){for(var e=void 0,o=0;o<n.length;){if(255===(e=n[o])[0]&225===e[1])return e;o++}return[]}},{key:"insertExif",value:function(l,e){var t=l.replace("data:image/jpeg;base64,",""),i=this.decode64(t),n=i.indexOf(255,3),d=i.slice(0,n),o=i.slice(n),s=d;return s=(s=s.concat(e)).concat(o)}},{key:"slice2Segments",value:function(o){for(var e=0,s=[];;){if(255===o[e]&218===o[e+1])break;if(255===o[e]&216===o[e+1])e+=2;else{var i=e+(256*o[e+2]+o[e+3])+2,n=o.slice(e,i);s.push(n),e=i}if(e>o.length)break}return s}},{key:"decode64",value:function(d){var p,u,c,m,h="",g="",v=0,f=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(d)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");p=this.KEY_STR.indexOf(d.charAt(v++))<<2|(c=this.KEY_STR.indexOf(d.charAt(v++)))>>4,u=(15&c)<<4|(m=this.KEY_STR.indexOf(d.charAt(v++)))>>2,h=(3&m)<<6|(g=this.KEY_STR.indexOf(d.charAt(v++))),f.push(p),64!==m&&f.push(u),64!==g&&f.push(h),p=u=h="",c=m=g="",v<d.length;);return f}}]),t}();l.initClass(),c._autoDiscoverFunction=function(){if(c.autoDiscover)return c.discover()},function(d,e){var t=!1,p=!0,c=d.document,r=c.documentElement,o=c.addEventListener?"addEventListener":"attachEvent",s=c.addEventListener?"removeEventListener":"detachEvent",a=c.addEventListener?"":"on",l=function i(n){if("readystatechange"!==n.type||"complete"===c.readyState)return("load"===n.type?d:c)[s](a+n.type,i,!1),!t&&(t=!0)?e.call(d,n.type||n):void 0};if("complete"!==c.readyState){if(c.createEventObject&&r.doScroll){try{p=!d.frameElement}catch(t){}p&&function t(){try{r.doScroll("left")}catch(e){return void setTimeout(t,50)}return l("poll")}()}c[o](a+"DOMContentLoaded",l,!1),c[o](a+"readystatechange",l,!1),d[o](a+"load",l,!1)}}(window,c._autoDiscoverFunction)}(n={exports:{}},n.exports),n.exports),s={getSignedURL:function(l,e){var t={filePath:l.name,contentType:l.type};return new Promise(function(i,n){var d=new FormData,o=new XMLHttpRequest,s="function"==typeof e.signingURL?e.signingURL(l):e.signingURL;o.open("POST",s),o.onload=function(){200==o.status?i(JSON.parse(o.response)):n(o.statusText)},o.onerror=function(t){console.error("Network Error : Could not send request to AWS (Maybe CORS errors)"),n(t)},!0===e.withCredentials&&(o.withCredentials=!0),Object.entries(e.headers||{}).forEach(function(n){var i=_slicedToArray(n,2),s=i[0],e=i[1];o.setRequestHeader(s,e)}),t=Object.assign(t,e.params||{}),Object.entries(t).forEach(function(n){var i=_slicedToArray(n,2),o=i[0],e=i[1];d.append(o,e)}),o.send(d)})},sendFile:function(o,e,t){var i=t?this.setResponseHandler:this.sendS3Handler;return this.getSignedURL(o,e).then(function(e){return i(e,o)}).catch(function(t){return t})},setResponseHandler:function(n,e){e.s3Signature=n.signature,e.s3Url=n.postEndpoint},sendS3Handler:function(o,e){var s=new FormData,t=o.signature;return Object.keys(t).forEach(function(n){s.append(n,t[n])}),s.append("file",e),new Promise(function(i,e){var n=new XMLHttpRequest;n.open("POST",o.postEndpoint),n.onload=function(){if(201==n.status){var t=new window.DOMParser().parseFromString(n.response,"text/xml").firstChild.children[0].innerHTML;i({success:!0,message:t})}else{var o=new window.DOMParser().parseFromString(n.response,"text/xml").firstChild.children[0].innerHTML;e({success:!1,message:o+". Request is marked as resolved when returns as status 201"})}},n.onerror=function(){var i=new window.DOMParser().parseFromString(n.response,"text/xml").firstChild.children[1].innerHTML;e({success:!1,message:i})},n.send(s)})}};return o.autoDiscover=!1,function(m,g,e,t,n,i,o,r,v,f){"boolean"!=typeof o&&(v=r,r=o,o=!1);var u,z="function"==typeof e?e.options:e;if(m&&m.render&&(z.render=m.render,z.staticRenderFns=m.staticRenderFns,z._compiled=!0,n&&(z.functional=!0)),t&&(z._scopeId=t),i?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),g&&g.call(this,v(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},z._ssrRegister=u):g&&(u=o?function(){g.call(this,f(this.$root.$options.shadowRoot))}:function(t){g.call(this,r(t))}),u)if(z.functional){var c=z.render;z.render=function(n,e){return u.call(e),c(n,e)}}else{var p=z.beforeCreate;z.beforeCreate=p?[].concat(p,u):[u]}return e}({render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",{ref:"dropzoneElement",class:{"vue-dropzone dropzone":this.includeStyling},attrs:{id:this.id}},[this.useCustomSlot?e("div",{staticClass:"dz-message"},[this._t("default",[this._v("Drop files here to upload")])],2):this._e()])},staticRenderFns:[]},void 0,{props:{id:{type:String,required:!0,default:"dropzone"},options:{type:Object,required:!0},includeStyling:{type:Boolean,default:!0,required:!1},awss3:{type:Object,required:!1,default:null},destroyDropzone:{type:Boolean,default:!0,required:!1},duplicateCheck:{type:Boolean,default:!1,required:!1},useCustomSlot:{type:Boolean,default:!1,required:!1}},data:function(){return{isS3:!1,isS3OverridesServerPropagation:!1,wasQueueAutoProcess:!0}},computed:{dropzoneSettings:function(){var n={thumbnailWidth:200,thumbnailHeight:200};return Object.keys(this.options).forEach(function(e){n[e]=this.options[e]},this),null!==this.awss3&&(n.autoProcessQueue=!1,this.isS3=!0,this.isS3OverridesServerPropagation=!1===this.awss3.sendFileToServer,void 0!==this.options.autoProcessQueue&&(this.wasQueueAutoProcess=this.options.autoProcessQueue),this.isS3OverridesServerPropagation&&(n.url=function(t){return t[0].s3Url})),n}},mounted:function(){if(!(this.$isServer&&this.hasBeenMounted)){this.hasBeenMounted=!0,this.dropzone=new o(this.$refs.dropzoneElement,this.dropzoneSettings);var s=this;this.dropzone.on("thumbnail",function(e,t){s.$emit("vdropzone-thumbnail",e,t)}),this.dropzone.on("addedfile",function(e){var t,o;if(s.duplicateCheck&&this.files.length)for(t=0,o=this.files.length;t<o-1;t++)this.files[t].name===e.name&&this.files[t].size===e.size&&this.files[t].lastModifiedDate.toString()===e.lastModifiedDate.toString()&&(this.removeFile(e),s.$emit("vdropzone-duplicate-file",e));s.$emit("vdropzone-file-added",e),s.isS3&&s.wasQueueAutoProcess&&!e.manuallyAdded&&s.getSignedAndUploadToS3(e)}),this.dropzone.on("addedfiles",function(e){s.$emit("vdropzone-files-added",e)}),this.dropzone.on("removedfile",function(e){s.$emit("vdropzone-removed-file",e),e.manuallyAdded&&null!==s.dropzone.options.maxFiles&&s.dropzone.options.maxFiles++}),this.dropzone.on("success",function(e,t){if(s.$emit("vdropzone-success",e,t),s.isS3){if(s.isS3OverridesServerPropagation){var i=new window.DOMParser().parseFromString(t,"text/xml").firstChild.children[0].innerHTML;s.$emit("vdropzone-s3-upload-success",i)}s.wasQueueAutoProcess&&s.setOption("autoProcessQueue",!1)}}),this.dropzone.on("successmultiple",function(e,t){s.$emit("vdropzone-success-multiple",e,t)}),this.dropzone.on("error",function(e,t,i){s.$emit("vdropzone-error",e,t,i),this.isS3&&s.$emit("vdropzone-s3-upload-error")}),this.dropzone.on("errormultiple",function(e,t,i){s.$emit("vdropzone-error-multiple",e,t,i)}),this.dropzone.on("sending",function(e,t,i){if(s.isS3)if(s.isS3OverridesServerPropagation){var n=e.s3Signature;Object.keys(n).forEach(function(e){i.append(e,n[e])})}else i.append("s3ObjectLocation",e.s3ObjectLocation);s.$emit("vdropzone-sending",e,t,i)}),this.dropzone.on("sendingmultiple",function(e,t,i){s.$emit("vdropzone-sending-multiple",e,t,i)}),this.dropzone.on("complete",function(e){s.$emit("vdropzone-complete",e)}),this.dropzone.on("completemultiple",function(e){s.$emit("vdropzone-complete-multiple",e)}),this.dropzone.on("canceled",function(e){s.$emit("vdropzone-canceled",e)}),this.dropzone.on("canceledmultiple",function(e){s.$emit("vdropzone-canceled-multiple",e)}),this.dropzone.on("maxfilesreached",function(e){s.$emit("vdropzone-max-files-reached",e)}),this.dropzone.on("maxfilesexceeded",function(e){s.$emit("vdropzone-max-files-exceeded",e)}),this.dropzone.on("processing",function(e){s.$emit("vdropzone-processing",e)}),this.dropzone.on("processingmultiple",function(e){s.$emit("vdropzone-processing-multiple",e)}),this.dropzone.on("uploadprogress",function(e,t,i){s.$emit("vdropzone-upload-progress",e,t,i)}),this.dropzone.on("totaluploadprogress",function(e,t,i){s.$emit("vdropzone-total-upload-progress",e,t,i)}),this.dropzone.on("reset",function(){s.$emit("vdropzone-reset")}),this.dropzone.on("queuecomplete",function(){s.$emit("vdropzone-queue-complete")}),this.dropzone.on("drop",function(e){s.$emit("vdropzone-drop",e)}),this.dropzone.on("dragstart",function(e){s.$emit("vdropzone-drag-start",e)}),this.dropzone.on("dragend",function(e){s.$emit("vdropzone-drag-end",e)}),this.dropzone.on("dragenter",function(e){s.$emit("vdropzone-drag-enter",e)}),this.dropzone.on("dragover",function(e){s.$emit("vdropzone-drag-over",e)}),this.dropzone.on("dragleave",function(e){s.$emit("vdropzone-drag-leave",e)}),s.$emit("vdropzone-mounted")}},beforeDestroy:function(){this.destroyDropzone&&this.dropzone.destroy()},methods:{manuallyAddFile:function(o,e){o.manuallyAdded=!0,this.dropzone.emit("addedfile",o);var t=!1;if((-1<e.indexOf(".svg")||-1<e.indexOf(".png")||-1<e.indexOf(".jpg")||-1<e.indexOf(".jpeg")||-1<e.indexOf(".gif")||-1<e.indexOf(".webp"))&&(t=!0),this.dropzone.options.createImageThumbnails&&t&&o.size<=1024*(1024*this.dropzone.options.maxThumbnailFilesize)){e&&this.dropzone.emit("thumbnail",o,e);for(var s=o.previewElement.querySelectorAll("[data-dz-thumbnail]"),n=0;n<s.length;n++)s[n].style.width=this.dropzoneSettings.thumbnailWidth+"px",s[n].style.height=this.dropzoneSettings.thumbnailHeight+"px",s[n].style["object-fit"]="contain"}this.dropzone.emit("complete",o),this.dropzone.options.maxFiles&&this.dropzone.options.maxFiles--,this.dropzone.files.push(o),this.$emit("vdropzone-file-added-manually",o)},setOption:function(n,e){this.dropzone.options[n]=e},removeAllFiles:function(t){this.dropzone.removeAllFiles(t)},processQueue:function(){var t=this,n=this.dropzone;this.isS3&&!this.wasQueueAutoProcess?this.getQueuedFiles().forEach(function(n){t.getSignedAndUploadToS3(n)}):this.dropzone.processQueue(),this.dropzone.on("success",function(){n.options.autoProcessQueue=!0}),this.dropzone.on("queuecomplete",function(){n.options.autoProcessQueue=!1})},init:function(){return this.dropzone.init()},destroy:function(){return this.dropzone.destroy()},updateTotalUploadProgress:function(){return this.dropzone.updateTotalUploadProgress()},getFallbackForm:function(){return this.dropzone.getFallbackForm()},getExistingFallback:function(){return this.dropzone.getExistingFallback()},setupEventListeners:function(){return this.dropzone.setupEventListeners()},removeEventListeners:function(){return this.dropzone.removeEventListeners()},disable:function(){return this.dropzone.disable()},enable:function(){return this.dropzone.enable()},filesize:function(t){return this.dropzone.filesize(t)},accept:function(n,e){return this.dropzone.accept(n,e)},addFile:function(t){return this.dropzone.addFile(t)},removeFile:function(t){this.dropzone.removeFile(t)},getAcceptedFiles:function(){return this.dropzone.getAcceptedFiles()},getRejectedFiles:function(){return this.dropzone.getRejectedFiles()},getFilesWithStatus:function(){return this.dropzone.getFilesWithStatus()},getQueuedFiles:function(){return this.dropzone.getQueuedFiles()},getUploadingFiles:function(){return this.dropzone.getUploadingFiles()},getAddedFiles:function(){return this.dropzone.getAddedFiles()},getActiveFiles:function(){return this.dropzone.getActiveFiles()},getSignedAndUploadToS3:function(n){var e=this,i=s.sendFile(n,this.awss3,this.isS3OverridesServerPropagation);this.isS3OverridesServerPropagation?i.then(function(){setTimeout(function(){return e.dropzone.processFile(n)})}):i.then(function(i){i.success?(n.s3ObjectLocation=i.message,setTimeout(function(){return e.dropzone.processFile(n)}),e.$emit("vdropzone-s3-upload-success",i.message)):void 0===i.message?e.$emit("vdropzone-s3-upload-error","Network Error : Could not send request to AWS. (Maybe CORS error)"):e.$emit("vdropzone-s3-upload-error",i.message)}),i.catch(function(t){alert(t)})},setAWSSigningURL:function(t){this.isS3&&(this.awss3.signingURL=t)}}},void 0,!1,void 0,void 0,void 0)});

