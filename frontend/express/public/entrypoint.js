// Countly Dashboard Entrypoint
// This file serves as the main entry point for the Vite bundler

// =============================================================================
// CSS/SCSS IMPORTS (from Gruntfile.js cssmin and sass tasks)
// =============================================================================

// Main stylesheets
import './stylesheets/main.css';
import './stylesheets/vue/clyvue.scss';
import './stylesheets/leaflet/leaflet.css';
import './stylesheets/vue/vue-json-pretty.css';
import './javascripts/dom/gridstack/gridstack.css';
import './javascripts/dom/pace/pace-theme-flash.css';
import './stylesheets/bulma/bulma-custom.css';
import './stylesheets/styles/manifest.scss';
import './stylesheets/vue/element-tiptap.css';

// Plugin stylesheets
// import.meta.glob('../../../plugins/*/frontend/public/stylesheets/**/*.scss', { eager: true });
import.meta.glob('../../../plugins/*/frontend/public/stylesheets/**/*.css');

import "./imports.js";

// =============================================================================
// LEGACY SCRIPT IMPORTS
// =============================================================================

// Import all legacy scripts concatenated into a single shared scope
// This virtual module is generated by the legacyConcatPlugin in vite.config.js
// All legacy scripts share the same scope and can access each other's variables
import 'virtual:legacy-concat';

// Component imports
import ClyStatusBadge from './javascripts/components/cly-status-badge.vue';
import ClyTabs from './javascripts/components/nav/cly-tabs.vue';
import ClyDynamicTabs from './javascripts/components/nav/cly-dynamic-tabs.vue';

// Form component imports
import ClyForm from './javascripts/components/form/cly-form.vue';
import ClyFormStep from './javascripts/components/form/cly-form-step.vue';
import ClyFormField from './javascripts/components/form/cly-form-field.vue';
import ClyFormFieldGroup from './javascripts/components/form/cly-form-field-group.vue';
import ClyInlineFormField from './javascripts/components/form/cly-inline-form-field.vue';
import ClyFormFieldChecklistbox from './javascripts/components/form/cly-form-field-checklistbox.vue';

// Drawer component imports
import ClyDrawer from './javascripts/components/drawer/cly-drawer.vue';

// Register components globally
window.Vue.component('cly-status-badge', ClyStatusBadge);
window.Vue.component('cly-tabs', ClyTabs);
window.Vue.component('cly-dynamic-tabs', ClyDynamicTabs);

// Register form components globally
window.Vue.component('cly-form', ClyForm);
window.Vue.component('cly-form-step', ClyFormStep);
window.Vue.component('cly-form-field', ClyFormField);
window.Vue.component('cly-form-field-group', ClyFormFieldGroup);
window.Vue.component('cly-inline-form-field', ClyInlineFormField);
window.Vue.component('cly-form-field-checklistbox', ClyFormFieldChecklistbox);

// Register drawer components globally
window.Vue.component('cly-drawer', ClyDrawer);

// =============================================================================
// NEW ES MODULE CODE GOES BELOW
// =============================================================================
//
// From here onwards, you can use standard ES module import/export syntax.
// All legacy globals (like $, _, Backbone, Vue, countlyGlobal, countlyCommon, etc.)
// are available on the window object after the legacy scripts execution.
//
// Example usage:
//
// import { MyNewModule } from './javascripts/modules/my-new-module.js';
// import { SomeHelper } from './javascripts/helpers/some-helper.js';
//
// The legacy code can still be accessed via window:
// const $ = window.jQuery;
// const Vue = window.Vue;
// const countlyCommon = window.countlyCommon;
//
// =============================================================================

// Add any new ES module imports here as you modernize the codebase
window.app.recordEvent = () => {}; // eslint-disable-line