<link rel="stylesheet" href="dashboards/javascripts/gridstack/gridstack.css" />
<script type="text/javascript" src='dashboards/javascripts/gridstack/gridstack.js'></script>
<script type="text/javascript" src='dashboards/javascripts/gridstack/gridstack.jQueryUI.js'></script>
<script type="text/javascript" src='dashboards/javascripts/jquery.sparkline.js'></script>
<script type="text/javascript" src='dashboards/javascripts/screenfull.min.js'></script>

<div id="dashboards">
    <div id="dashboard-data">
        <div id="dashboard-top">
            <div class="logo full-screen"></div>
            <div id="dashboard-name"></div>
            <div id="fullscreen" class="icon-button light">
                <i class="ion-arrow-expand"></i>
                <i class="ion-arrow-shrink"></i>
            </div>
            <div id="add-widget-button-group" class="cly-button-menu-group green" style="float: right; margin-left: 10px;">
                <div id="add-widget" class="icon-button green" data-localize="dashboards.add-widget"></div>
                <div class="cly-button-menu-trigger"></div>

                <div class="cly-button-menu dashboard-menu">
                    <div id="fullscreen-alt" class="item">
                      <i class="fa fa-arrows-alt"></i>
                      <span data-localize="dashboards.activate-full-screen"></span>
                    </div>
                    <div id="edit-dashboard" class="item">
                      <i class="fa fa-pencil"></i>
                      <span data-localize="dashboards.edit-dashboard"></span>
                    </div>
                    <div id="duplicate-dashboard" class="item">
                        <i class="fa fa-clone"></i>
                        <span data-localize="dashboards.duplicate-dashboard"></span>
                    </div>
                    <div id="delete-dashboard" class="item">
                      <i class="fa fa-trash"></i>
                      <span data-localize="dashboards.delete-dashboard"></span>
                    </div>

                </div>
            </div>
            {{> date-selector}}
            <div style="clear: both"></div>
        </div>
        <div class="grid-stack"></div>
    </div>
    {{> dashboard-drawer }}
    {{> widget-drawer }}
    {{> no-widgets }}
    {{> no-dashboards }}
</div>

<script>
    $(document).ready(function () {
        $(".cly-button-menu-trigger").on("click", function(e) {
            $(this).toggleClass("active");
            e.stopPropagation();
        });

        $(".cly-button-menu").on("click", function (e) {
            e.stopPropagation();
        });

        $("body, .cly-button-menu .item").on("click", function () {
           $(".cly-button-menu-trigger").removeClass("active");
        });

        $("body").off("click", ".grid-stack-item .edit").on("click", ".grid-stack-item .edit", function () {
            $(".edit-menu").hide();
            $(this).next(".edit-menu").fadeIn();
        });

        $("body").off("mouseleave").on("mouseleave", ".grid-stack-item", function () {
            $(this).find(".edit").next(".edit-menu").fadeOut();
            $(this).find(".widget-bucket-selector").next(".edit-menu").fadeOut();
            $(this).find(".widget-bucket-selector").removeClass("active");
        });
    });
</script>
