
<div v-bind:class="[componentId]">
    <cly-header
        :title="i18n('languages.title')"
        :tooltip="{description}"
    >
		<template v-slot:header-right>
          <cly-more-options v-if="topDropdown" size="small">
            <el-dropdown-item :key="idx" v-for="(item, idx) in topDropdown" :command="{url: item.value}">{{item.label}}</el-dropdown-item>
          </cly-more-options>
        </template>
    </cly-header>
    <cly-main>
		<cly-date-picker-g class="languages-date-picker-container"></cly-date-picker-g>
		<cly-section>
			<div class="bu-columns bu-is-gapless">
				<div class="bu-column bu-is-6">
					<cly-chart-pie test-id="pie-total" :option="pieOptionsTotal" :showToggle="false"  :force-loading="isLoading" v-loading="isLoading"></cly-chart-pie>
				</div>
				<div class="bu-column bu-is-6">
					<cly-chart-pie test-id="pie-new" :option="pieOptionsNew" :showToggle="false"  :force-loading="isLoading" v-loading="isLoading"></cly-chart-pie>
				</div>
			</div>
		</cly-section>
		<cly-section>
			<cly-datatable-n  test-id="languages" :rows="appRows" :exportFormat="formatExportFunction" :resizable="true" :force-loading="isLoading" v-loading="isLoading">
				<template v-slot="scope">
					<el-table-column sortable="custom" prop="langs" :label="i18n('languages.table.language')">
                        <template #default="scope">
                            <div class="bu-level">
                                <div class="bu-level bu-is-justify-content-flex-start" :data-test-id="'datatable-languages-language-' + scope.$index">
                                    <span>{{scope.row.langs}}</span>
                                </div>
                            </div>
                        </template>
                    </el-table-column>
					<el-table-column sortable="custom" prop="t" :label="i18n('common.table.total-sessions')">
						<template #default="scope">
                            <div class="bu-level">
                                <div class="bu-is-flex user-activity-table__data-item-container">
                                    <div class="bu-level bu-is-justify-content-flex-start" :data-test-id="'datatable-languages-total-session-' + scope.$index">
                                        <span>{{formatNumber(scope.row.t)}}</span>
                                    </div>
                                    <div class="bu-level user-activity-table__divider" :data-test-id="'datatable-languages-total-session-divider-' + scope.$index">
                                        <span>|</span>
                                    </div>
                                    <div class="bu-level bu-is-justify-content-flex-end" :data-test-id="'datatable-languages-total-session-percentage-' + scope.$index">
                                        <span>{{scope.row.tPerc}}%</span>
                                    </div>
                                </div>
                                <cly-progress-bar :data-test-id="'datatable-languages-total-session-progress-bar-' + scope.$index" :percentage="parseInt(scope.row.tPerc)" :height=8 > </cly-progress-bar>
                            </div>
                        </template>
					</el-table-column>
					<el-table-column sortable="custom" prop="u" :label="i18n('common.table.total-users')">
						<template #default="scope">
                            <div class="bu-level">
                                <div class="bu-is-flex user-activity-table__data-item-container">
                                    <div class="bu-level bu-is-justify-content-flex-start" :data-test-id="'datatable-languages-total-users-' + scope.$index">
                                        <span>{{formatNumber(scope.row.u)}}</span>
                                    </div>
                                    <div class="bu-level user-activity-table__divider" :data-test-id="'datatable-languages-total-users-divider-' + scope.$index">
                                        <span>|</span>
                                    </div>
                                    <div class="bu-level bu-is-justify-content-flex-end" :data-test-id="'datatable-languages-total-users-percentage-' + scope.$index">
                                        <span>{{scope.row.uPerc}}%</span>
                                    </div>
                                </div>
                                <cly-progress-bar :data-test-id="'datatable-languages-total-users-progress-bar-' + scope.$index" :percentage="parseInt(scope.row.uPerc)" :height=8 > </cly-progress-bar>
                            </div>
                        </template>
					</el-table-column>
					<el-table-column sortable="custom" prop="n" :label="i18n('common.table.new-users')">
						<template #default="scope">
                            <div class="bu-level">
                                <div class="bu-is-flex user-activity-table__data-item-container">
                                    <div class="bu-level bu-is-justify-content-flex-start" :data-test-id="'datatable-languages-new-users-' + scope.$index">
                                        <span>{{formatNumber(scope.row.n)}}</span>
                                    </div>
                                    <div class="bu-level user-activity-table__divider" :data-test-id="'datatable-languages-new-users-divider-' + scope.$index">
                                        <span>|</span>
                                    </div>
                                    <div class="bu-level bu-is-justify-content-flex-end" :data-test-id="'datatable-languages-new-users-percentage-' + scope.$index">
                                        <span>{{scope.row.nPerc}}%</span>
                                    </div>
                                </div>
                                <cly-progress-bar :data-test-id="'datatable-languages-new-users-progress-bar-' + scope.$index" :percentage="parseInt(scope.row.nPerc)" :height=8 > </cly-progress-bar>
                            </div>
                        </template>
					</el-table-column>
				</template>
			</cly-datatable-n>
		</cly-section>
    </cly-main>
</div>