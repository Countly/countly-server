<div v-bind:class="[componentId, 'clyd-widget']">
    <div class="bu-level" v-if="!showZoom">
        <div class="bu-level-left bu-is-flex-shrink-1" style="min-width: 0">
            <clyd-widget-title class="bu-level-item" :title="title"></clyd-widget-title>
        </div>
	   <div class="bu-level-right">
            <div class="bu-level-item" v-if="isAllowed">
                <cly-more-options @command="onWidgetCommand">
					<el-dropdown-item command="clear_cache">{{i18n('active_users.clear-cached-active')}}</el-dropdown-item>
                    <el-dropdown-item command="edit">{{i18n('common.edit')}}</el-dropdown-item>
					<el-dropdown-item command="delete">{{i18n('common.delete')}}</el-dropdown-item>
					<el-dropdown-item  v-if="data.visualization === 'time-series' || data.visualization === 'bar-chart'" command="zoom">{{i18n('common.zoom-in')}}</el-dropdown-item>
                </cly-more-options>
            </div>
       </div>
   </div>
	<cly-chart-zoom ref="zoomRef" v-if="showZoom" @zoom-reset="onZoomReset" :echartRef="$refs.echartRef.$refs.echarts" class="bu-is-flex bu-is-align-items-center bu-is-justify-content-flex-end bu-m-0 cly-vue-zoom__external"></cly-chart-zoom>
   <clyd-primary-legend :apps="data.apps" :custom-period="data.custom_period"></clyd-primary-legend>

   <div class="clyd-widget__content" v-loading="loading" :class="'clyd-widget__content--vis-' + data.visualization">
		<template v-if="!loading">
            <cly-notification v-if="widgetData.calculating" :text="i18n('active_users.active-users-calculating')" class="bu-mb-5"></cly-notification>
            <cly-chart-time :option="widgetData.lineOptions" :legend="widgetData.lineLegend" :show-zoom="false" @patchzoom="onPatchZoom" @datazoom="onDataZoom" ref="echartRef" :showDownload="false" :showToggle="false" height="auto" skin="full" category="user-analytics">
            </cly-chart-time>
        </template>
   </div>
</div>
